<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebGL图形展示 - QiaoyuanTao.github.io</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #7209b7;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .intro {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .intro h2 {
            margin-bottom: 15px;
            color: var(--success);
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .demo-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .demo-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        .card-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card-header h3 {
            font-size: 1.4rem;
            margin-bottom: 8px;
        }
        
        .card-header p {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .card-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        canvas {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin-bottom: 15px;
            width: 100%;
            max-width: 300px;
            height: 300px;
        }
        
        .description {
            font-size: 0.9rem;
            line-height: 1.5;
            opacity: 0.9;
            margin-top: 10px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 0.9rem;
        }
        
        button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        .deployment-steps {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-top: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .deployment-steps h2 {
            margin-bottom: 20px;
            color: var(--success);
        }
        
        .steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .step {
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .step-number {
            background: var(--accent);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-weight: bold;
        }
        
        .step-content h3 {
            margin-bottom: 5px;
        }
        
        code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        @media (max-width: 768px) {
            .demo-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>WebGL 图形展示</h1>
            <p class="subtitle">这是一个展示WebGL基础图形的页面，包含了三角形、正方形、彩色图形等示例。每个示例都使用了不同的WebGL绘制技术。</p>
        </header>
        
        <section class="intro">
            <h2>关于此项目</h2>
            <p>这个页面展示了多种WebGL图形绘制技术，包括基本图形绘制、颜色插值、多着色器使用等。所有图形都是使用WebGL 2.0/WebGL 3.0 ES实现的，并提供了交互功能。</p>
            <p>您可以通过下方的按钮与每个图形进行交互，体验不同的视觉效果。</p>
        </section>
        
        <div class="demo-grid">
            <!-- 三角形示例 -->
            <div class="demo-card">
                <div class="card-header">
                    <h3>基本三角形</h3>
                    <p>使用TRIANGLES模式绘制</p>
                </div>
                <div class="card-content">
                    <canvas id="triangle-canvas"></canvas>
                    <p class="description">这个示例展示了如何使用WebGL绘制一个基本的三角形。顶点着色器接收位置信息，片元着色器设置黄色填充。</p>
                    <div class="controls">
                        <button onclick="changeTriangleColor()">改变颜色</button>
                        <button onclick="resetTriangle()">重置</button>
                    </div>
                </div>
            </div>
            
            <!-- 正方形示例 -->
            <div class="demo-card">
                <div class="card-header">
                    <h3>正方形</h3>
                    <p>使用TRIANGLE_FAN模式绘制</p>
                </div>
                <div class="card-content">
                    <canvas id="square-canvas"></canvas>
                    <p class="description">这个示例展示了如何使用TRIANGLE_FAN模式绘制一个正方形。通过四个顶点和适当的绘制模式实现。</p>
                    <div class="controls">
                        <button onclick="rotateSquare()">旋转</button>
                        <button onclick="resetSquare()">重置</button>
                    </div>
                </div>
            </div>
            
            <!-- 三角形和正方形组合 -->
            <div class="demo-card">
                <div class="card-header">
                    <h3>三角形与正方形</h3>
                    <p>组合图形绘制</p>
                </div>
                <div class="card-content">
                    <canvas id="trisquare-canvas"></canvas>
                    <p class="description">这个示例展示了如何在同一个画布上绘制三角形和正方形，使用不同的绘制模式。</p>
                    <div class="controls">
                        <button onclick="toggleTrisquare()">切换模式</button>
                        <button onclick="resetTrisquare()">重置</button>
                    </div>
                </div>
            </div>
            
            <!-- 彩色三角形 -->
            <div class="demo-card">
                <div class="card-header">
                    <h3>彩色三角形</h3>
                    <p>顶点颜色插值</p>
                </div>
                <div class="card-content">
                    <canvas id="trianglecolor-canvas"></canvas>
                    <p class="description">这个示例展示了如何为三角形的每个顶点设置不同颜色，WebGL会自动在顶点之间进行颜色插值。</p>
                    <div class="controls">
                        <button onclick="randomizeColors()">随机颜色</button>
                        <button onclick="resetTriangleColor()">重置</button>
                    </div>
                </div>
            </div>
            
            <!-- 双着色器示例 -->
            <div class="demo-card">
                <div class="card-header">
                    <h3>双着色器图形</h3>
                    <p>使用两个片元着色器</p>
                </div>
                <div class="card-content">
                    <canvas id="trisquarenc-canvas"></canvas>
                    <p class="description">这个示例展示了如何使用两个不同的片元着色器，一个用于三角形(红色)，一个用于正方形(绿色)。</p>
                    <div class="controls">
                        <button onclick="swapShaders()">交换着色器</button>
                        <button onclick="resetTrisquareNC()">重置</button>
                    </div>
                </div>
            </div>
            
            <!-- 彩色组合图形 -->
            <div class="demo-card">
                <div class="card-header">
                    <h3>彩色组合图形</h3>
                    <p>使用顶点颜色属性</p>
                </div>
                <div class="card-content">
                    <canvas id="trisquarencv2-canvas"></canvas>
                    <p class="description">这个示例展示了如何为三角形和正方形分别设置不同的颜色，通过顶点颜色属性实现。</p>
                    <div class="controls">
                        <button onclick="changeShapeColors()">改变形状颜色</button>
                        <button onclick="resetTrisquareNCV2()">重置</button>
                    </div>
                </div>
            </div>
        </div>
        
        <section class="deployment-steps">
            <h2>部署到 GitHub Pages 的步骤</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>创建仓库</h3>
                        <p>在GitHub上创建一个名为 <code>QiaoyuanTao.github.io</code> 的仓库（如果尚未创建）。</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>上传文件</h3>
                        <p>将此HTML文件保存为 <code>index.html</code> 并上传到您的仓库根目录。</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>启用GitHub Pages</h3>
                        <p>在仓库设置中，找到"Pages"部分，选择主分支作为源，然后保存。</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>访问您的网站</h3>
                        <p>几分钟后，您的网站将在 <code>https://QiaoyuanTao.github.io</code> 上线。</p>
                    </div>
                </div>
            </div>
        </section>
        
        <footer>
            <p>WebGL 图形展示 &copy; 2023 | 基于WebGL 3.0 ES | 部署在 GitHub Pages</p>
        </footer>
    </div>

    <script>
        // 初始化所有canvas的WebGL上下文
        function initWebGL(canvasId, vertexShaderSource, fragmentShaderSource) {
            const canvas = document.getElementById(canvasId);
            const gl = canvas.getContext('webgl2');
            
            if (!gl) {
                console.error('WebGL 2.0 not supported');
                return null;
            }
            
            // 创建顶点着色器
            const vertexShader = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vertexShader, vertexShaderSource);
            gl.compileShader(vertexShader);
            
            if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
                console.error('Vertex shader compilation error:', gl.getShaderInfoLog(vertexShader));
                return null;
            }
            
            // 创建片元着色器
            const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fragmentShader, fragmentShaderSource);
            gl.compileShader(fragmentShader);
            
            if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
                console.error('Fragment shader compilation error:', gl.getShaderInfoLog(fragmentShader));
                return null;
            }
            
            // 创建着色器程序
            const program = gl.createProgram();
            gl.attachShader(program, vertexShader);
            gl.attachShader(program, fragmentShader);
            gl.linkProgram(program);
            
            if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
                console.error('Program linking error:', gl.getProgramInfoLog(program));
                return null;
            }
            
            gl.useProgram(program);
            
            return { gl, program };
        }
        
        // 基本三角形绘制
        function drawTriangle() {
            const { gl, program } = initWebGL(
                'triangle-canvas',
                `#version 300 es
                in vec4 vPosition;
                void main() {
                    gl_Position = vPosition;
                }`,
                `#version 300 es
                precision mediump float;
                out vec4 fColor;
                uniform vec4 uColor;
                void main() {
                    fColor = uColor;
                }`
            );
            
            if (!gl) return;
            
            // 设置三角形顶点
            const vertices = new Float32Array([
                0.0, 0.5,
                -0.5, -0.5,
                0.5, -0.5
            ]);
            
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
            
            const positionLocation = gl.getAttribLocation(program, 'vPosition');
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(positionLocation);
            
            // 设置颜色
            const colorLocation = gl.getUniformLocation(program, 'uColor');
            gl.uniform4f(colorLocation, 1.0, 1.0, 0.0, 1.0); // 黄色
            
            gl.clearColor(0.0, 0.0, 0.0, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            
            gl.drawArrays(gl.TRIANGLES, 0, 3);
            
            // 存储颜色位置供后续修改
            window.triangleColorLocation = colorLocation;
            window.triangleGl = gl;
            window.triangleProgram = program;
            window.triangleOriginalColor = [1.0, 1.0, 0.0, 1.0];
        }
        
        // 正方形绘制
        function drawSquare() {
            const { gl, program } = initWebGL(
                'square-canvas',
                `#version 300 es
                in vec4 vPosition;
                uniform float uRotation;
                void main() {
                    float s = sin(uRotation);
                    float c = cos(uRotation);
                    mat2 rotation = mat2(c, -s, s, c);
                    vec2 rotatedPosition = rotation * vPosition.xy;
                    gl_Position = vec4(rotatedPosition, 0.0, 1.0);
                }`,
                `#version 300 es
                precision mediump float;
                out vec4 fColor;
                void main() {
                    fColor = vec4(0.0, 1.0, 1.0, 1.0);
                }`
            );
            
            if (!gl) return;
            
            // 设置正方形顶点
            const vertices = new Float32Array([
                -0.5, -0.5,
                0.5, -0.5,
                0.5, 0.5,
                -0.5, 0.5
            ]);
            
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
            
            const positionLocation = gl.getAttribLocation(program, 'vPosition');
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(positionLocation);
            
            // 旋转uniform
            const rotationLocation = gl.getUniformLocation(program, 'uRotation');
            gl.uniform1f(rotationLocation, 0);
            
            gl.clearColor(0.1, 0.1, 0.1, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            
            gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);
            
            // 存储旋转位置供后续修改
            window.squareRotationLocation = rotationLocation;
            window.squareGl = gl;
            window.squareProgram = program;
            window.squareRotation = 0;
        }
        
        // 三角形和正方形组合绘制
        function drawTrisquare() {
            const { gl, program } = initWebGL(
                'trisquare-canvas',
                `#version 300 es
                in vec4 vPosition;
                void main() {
                    gl_Position = vPosition;
                }`,
                `#version 300 es
                precision mediump float;
                out vec4 fColor;
                void main() {
                    fColor = vec4(1.0, 0.5, 0.0, 1.0);
                }`
            );
            
            if (!gl) return;
            
            // 设置顶点 - 三角形和正方形
            const vertices = new Float32Array([
                // 三角形
                -0.5, 0.5,
                -1.0, -0.5,
                0.0, -0.5,
                // 正方形
                0.0, -0.5,
                1.0, -0.5,
                1.0, 0.5,
                0.0, 0.5
            ]);
            
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
            
            const positionLocation = gl.getAttribLocation(program, 'vPosition');
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(positionLocation);
            
            gl.clearColor(0.2, 0.2, 0.2, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            
            // 绘制三角形
            gl.drawArrays(gl.TRIANGLES, 0, 3);
            // 绘制正方形
            gl.drawArrays(gl.TRIANGLE_FAN, 3, 4);
            
            window.trisquareGl = gl;
            window.trisquareVertices = vertices;
            window.trisquareMode = 'separate';
        }
        
        // 彩色三角形绘制
        function drawTriangleColor() {
            const { gl, program } = initWebGL(
                'trianglecolor-canvas',
                `#version 300 es
                in vec4 aPosition;
                in vec4 aColor;
                out vec4 vColor;
                void main() {
                    gl_Position = aPosition;
                    vColor = aColor;
                }`,
                `#version 300 es
                precision mediump float;
                in vec4 vColor;
                out vec4 fColor;
                void main() {
                    fColor = vColor;
                }`
            );
            
            if (!gl) return;
            
            // 设置三角形顶点
            const vertices = new Float32Array([
                -1.0, -1.0,
                1.0, -1.0,
                0.0, 1.0
            ]);
            
            // 设置顶点颜色
            const colors = new Float32Array([
                1.0, 0.0, 0.0, 1.0,  // 红色
                0.0, 1.0, 0.0, 1.0,  // 绿色
                0.0, 0.0, 1.0, 1.0   // 蓝色
            ]);
            
            // 顶点缓冲区
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
            
            const positionLocation = gl.getAttribLocation(program, 'aPosition');
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(positionLocation);
            
            // 颜色缓冲区
            const colorBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);
            
            const colorLocation = gl.getAttribLocation(program, 'aColor');
            gl.vertexAttribPointer(colorLocation, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(colorLocation);
            
            gl.clearColor(0.0, 0.0, 0.0, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            
            gl.drawArrays(gl.TRIANGLES, 0, 3);
            
            // 存储颜色数据供后续修改
            window.triangleColorVertices = vertices;
            window.triangleColorColors = colors;
            window.triangleColorGl = gl;
            window.triangleColorColorBuffer = colorBuffer;
            window.triangleColorOriginalColors = new Float32Array(colors);
        }
        
        // 双着色器示例绘制
        function drawTrisquareNC() {
            const { gl, program } = initWebGL(
                'trisquarenc-canvas',
                `#version 300 es
                in vec4 vPosition;
                void main() {
                    gl_Position = vPosition;
                }`,
                `#version 300 es
                precision mediump float;
                out vec4 fColor;
                uniform vec4 uColor;
                void main() {
                    fColor = uColor;
                }`
            );
            
            if (!gl) return;
            
            // 设置顶点 - 三角形和正方形
            const vertices = new Float32Array([
                // 三角形
                -0.5, 0.5,
                -1.0, -0.5,
                0.0, -0.5,
                // 正方形
                0.0, -0.5,
                1.0, -0.5,
                1.0, 0.5,
                0.0, 0.5
            ]);
            
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
            
            const positionLocation = gl.getAttribLocation(program, 'vPosition');
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(positionLocation);
            
            gl.clearColor(0.3, 0.3, 0.3, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            
            // 设置三角形颜色 (红色)
            const colorLocation = gl.getUniformLocation(program, 'uColor');
            gl.uniform4f(colorLocation, 1.0, 0.0, 0.0, 1.0);
            gl.drawArrays(gl.TRIANGLES, 0, 3);
            
            // 设置正方形颜色 (绿色)
            gl.uniform4f(colorLocation, 0.0, 1.0, 0.0, 1.0);
            gl.drawArrays(gl.TRIANGLE_FAN, 3, 4);
            
            // 存储信息供后续修改
            window.trisquareNCColorLocation = colorLocation;
            window.trisquareNCGl = gl;
            window.trisquareNCProgram = program;
            window.trisquareNCSwapped = false;
        }
        
        // 彩色组合图形绘制
        function drawTrisquareNCV2() {
            const { gl, program } = initWebGL(
                'trisquarencv2-canvas',
                `#version 300 es
                in vec4 aPosition;
                in vec4 aColor;
                out vec4 vColor;
                void main() {
                    gl_Position = aPosition;
                    vColor = aColor;
                }`,
                `#version 300 es
                precision mediump float;
                in vec4 vColor;
                out vec4 fColor;
                void main() {
                    fColor = vColor;
                }`
            );
            
            if (!gl) return;
            
            // 设置顶点 - 三角形和正方形
            const vertices = new Float32Array([
                // 三角形
                -0.5, 0.5,
                -1.0, -0.5,
                0.0, -0.5,
                // 正方形
                0.0, -0.5,
                1.0, -0.5,
                1.0, 0.5,
                0.0, 0.5
            ]);
            
            // 设置颜色 - 三角形为绿色，正方形为红色
            const colors = new Float32Array([
                // 三角形 - 绿色
                0.0, 1.0, 0.0, 1.0,
                0.0, 1.0, 0.0, 1.0,
                0.0, 1.0, 0.0, 1.0,
                // 正方形 - 红色
                1.0, 0.0, 0.0, 1.0,
                1.0, 0.0, 0.0, 1.0,
                1.0, 0.0, 0.0, 1.0,
                1.0, 0.0, 0.0, 1.0
            ]);
            
            // 顶点缓冲区
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
            
            const positionLocation = gl.getAttribLocation(program, 'aPosition');
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(positionLocation);
            
            // 颜色缓冲区
            const colorBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);
            
            const colorLocation = gl.getAttribLocation(program, 'aColor');
            gl.vertexAttribPointer(colorLocation, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(colorLocation);
            
            gl.clearColor(0.0, 0.0, 0.0, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            
            // 绘制三角形
            gl.drawArrays(gl.TRIANGLES, 0, 3);
            // 绘制正方形
            gl.drawArrays(gl.TRIANGLE_FAN, 3, 4);
            
            // 存储信息供后续修改
            window.trisquareNCV2Vertices = vertices;
            window.trisquareNCV2Colors = colors;
            window.trisquareNCV2Gl = gl;
            window.trisquareNCV2ColorBuffer = colorBuffer;
            window.trisquareNCV2OriginalColors = new Float32Array(colors);
        }
        
        // 交互功能
        
        // 改变三角形颜色
        function changeTriangleColor() {
            if (!window.triangleGl || !window.triangleColorLocation) return;
            
            const colors = [
                [1.0, 1.0, 0.0, 1.0], // 黄色
                [1.0, 0.0, 0.0, 1.0], // 红色
                [0.0, 1.0, 0.0, 1.0], // 绿色
                [0.0, 0.0, 1.0, 1.0], // 蓝色
                [1.0, 0.0, 1.0, 1.0]  // 紫色
            ];
            
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            window.triangleGl.uniform4f(window.triangleColorLocation, ...randomColor);
            window.triangleGl.clear(window.triangleGl.COLOR_BUFFER_BIT);
            window.triangleGl.drawArrays(window.triangleGl.TRIANGLES, 0, 3);
        }
        
        // 重置三角形
        function resetTriangle() {
            if (!window.triangleGl || !window.triangleColorLocation) return;
            
            window.triangleGl.uniform4f(window.triangleColorLocation, ...window.triangleOriginalColor);
            window.triangleGl.clear(window.triangleGl.COLOR_BUFFER_BIT);
            window.triangleGl.drawArrays(window.triangleGl.TRIANGLES, 0, 3);
        }
        
        // 旋转正方形
        function rotateSquare() {
            if (!window.squareGl || !window.squareRotationLocation) return;
            
            window.squareRotation += 0.2;
            
            window.squareGl.uniform1f(window.squareRotationLocation, window.squareRotation);
            window.squareGl.clear(window.squareGl.COLOR_BUFFER_BIT);
            window.squareGl.drawArrays(window.squareGl.TRIANGLE_FAN, 0, 4);
        }
        
        // 重置正方形
        function resetSquare() {
            if (!window.squareGl || !window.squareRotationLocation) return;
            
            window.squareRotation = 0;
            window.squareGl.uniform1f(window.squareRotationLocation, window.squareRotation);
            window.squareGl.clear(window.squareGl.COLOR_BUFFER_BIT);
            window.squareGl.drawArrays(window.squareGl.TRIANGLE_FAN, 0, 4);
        }
        
        // 切换三角形和正方形的绘制模式
        function toggleTrisquare() {
            if (!window.trisquareGl) return;
            
            window.trisquareMode = window.trisquareMode === 'separate' ? 'combined' : 'separate';
            
            window.trisquareGl.clear(window.trisquareGl.COLOR_BUFFER_BIT);
            
            if (window.trisquareMode === 'separate') {
                // 分别绘制模式
                window.trisquareGl.drawArrays(window.trisquareGl.TRIANGLES, 0, 3);
                window.trisquareGl.drawArrays(window.trisquareGl.TRIANGLE_FAN, 3, 4);
            } else {
                // 组合绘制模式
                window.trisquareGl.drawArrays(window.trisquareGl.TRIANGLE_FAN, 0, 7);
            }
        }
        
        // 重置三角形和正方形组合
        function resetTrisquare() {
            if (!window.trisquareGl) return;
            
            window.trisquareMode = 'separate';
            window.trisquareGl.clear(window.trisquareGl.COLOR_BUFFER_BIT);
            window.trisquareGl.drawArrays(window.trisquareGl.TRIANGLES, 0, 3);
            window.trisquareGl.drawArrays(window.trisquareGl.TRIANGLE_FAN, 3, 4);
        }
        
        // 随机化彩色三角形的颜色
        function randomizeColors() {
            if (!window.triangleColorGl || !window.triangleColorColors) return;
            
            // 生成随机颜色
            for (let i = 0; i < window.triangleColorColors.length; i += 4) {
                window.triangleColorColors[i] = Math.random();     // R
                window.triangleColorColors[i+1] = Math.random();   // G
                window.triangleColorColors[i+2] = Math.random();   // B
                window.triangleColorColors[i+3] = 1.0;            // A
            }
            
            // 更新颜色缓冲区
            window.triangleColorGl.bindBuffer(window.triangleColorGl.ARRAY_BUFFER, window.triangleColorColorBuffer);
            window.triangleColorGl.bufferData(window.triangleColorGl.ARRAY_BUFFER, window.triangleColorColors, window.triangleColorGl.STATIC_DRAW);
            
            // 重绘
            window.triangleColorGl.clear(window.triangleColorGl.COLOR_BUFFER_BIT);
            window.triangleColorGl.drawArrays(window.triangleColorGl.TRIANGLES, 0, 3);
        }
        
        // 重置彩色三角形
        function resetTriangleColor() {
            if (!window.triangleColorGl || !window.triangleColorColors || !window.triangleColorOriginalColors) return;
            
            // 恢复原始颜色
            for (let i = 0; i < window.triangleColorOriginalColors.length; i++) {
                window.triangleColorColors[i] = window.triangleColorOriginalColors[i];
            }
            
            // 更新颜色缓冲区
            window.triangleColorGl.bindBuffer(window.triangleColorGl.ARRAY_BUFFER, window.triangleColorColorBuffer);
            window.triangleColorGl.bufferData(window.triangleColorGl.ARRAY_BUFFER, window.triangleColorColors, window.triangleColorGl.STATIC_DRAW);
            
            // 重绘
            window.triangleColorGl.clear(window.triangleColorGl.COLOR_BUFFER_BIT);
            window.triangleColorGl.drawArrays(window.triangleColorGl.TRIANGLES, 0, 3);
        }
        
        // 交换双着色器示例的颜色
        function swapShaders() {
            if (!window.trisquareNCGl || !window.trisquareNCColorLocation) return;
            
            window.trisquareNCSwapped = !window.trisquareNCSwapped;
            
            window.trisquareNCGl.clear(window.trisquareNCGl.COLOR_BUFFER_BIT);
            
            if (window.trisquareNCSwapped) {
                // 三角形为绿色，正方形为红色
                window.trisquareNCGl.uniform4f(window.trisquareNCColorLocation, 0.0, 1.0, 0.0, 1.0);
                window.trisquareNCGl.drawArrays(window.trisquareNCGl.TRIANGLES, 0, 3);
                window.trisquareNCGl.uniform4f(window.trisquareNCColorLocation, 1.0, 0.0, 0.0, 1.0);
                window.trisquareNCGl.drawArrays(window.trisquareNCGl.TRIANGLE_FAN, 3, 4);
            } else {
                // 三角形为红色，正方形为绿色
                window.trisquareNCGl.uniform4f(window.trisquareNCColorLocation, 1.0, 0.0, 0.0, 1.0);
                window.trisquareNCGl.drawArrays(window.trisquareNCGl.TRIANGLES, 0, 3);
                window.trisquareNCGl.uniform4f(window.trisquareNCColorLocation, 0.0, 1.0, 0.0, 1.0);
                window.trisquareNCGl.drawArrays(window.trisquareNCGl.TRIANGLE_FAN, 3, 4);
            }
        }
        
        // 重置双着色器示例
        function resetTrisquareNC() {
            if (!window.trisquareNCGl || !window.trisquareNCColorLocation) return;
            
            window.trisquareNCSwapped = false;
            window.trisquareNCGl.clear(window.trisquareNCGl.COLOR_BUFFER_BIT);
            
            // 三角形为红色，正方形为绿色
            window.trisquareNCGl.uniform4f(window.trisquareNCColorLocation, 1.0, 0.0, 0.0, 1.0);
            window.trisquareNCGl.drawArrays(window.trisquareNCGl.TRIANGLES, 0, 3);
            window.trisquareNCGl.uniform4f(window.trisquareNCColorLocation, 0.0, 1.0, 0.0, 1.0);
            window.trisquareNCGl.drawArrays(window.trisquareNCGl.TRIANGLE_FAN, 3, 4);
        }
        
        // 改变彩色组合图形的形状颜色
        function changeShapeColors() {
            if (!window.trisquareNCV2Gl || !window.trisquareNCV2Colors) return;
            
            // 为三角形生成随机颜色
            const triangleColor = [Math.random(), Math.random(), Math.random(), 1.0];
            for (let i = 0; i < 12; i += 4) {
                window.trisquareNCV2Colors[i] = triangleColor[0];
                window.trisquareNCV2Colors[i+1] = triangleColor[1];
                window.trisquareNCV2Colors[i+2] = triangleColor[2];
                window.trisquareNCV2Colors[i+3] = triangleColor[3];
            }
            
            // 为正方形生成随机颜色
            const squareColor = [Math.random(), Math.random(), Math.random(), 1.0];
            for (let i = 12; i < 28; i += 4) {
                window.trisquareNCV2Colors[i] = squareColor[0];
                window.trisquareNCV2Colors[i+1] = squareColor[1];
                window.trisquareNCV2Colors[i+2] = squareColor[2];
                window.trisquareNCV2Colors[i+3] = squareColor[3];
            }
            
            // 更新颜色缓冲区
            window.trisquareNCV2Gl.bindBuffer(window.trisquareNCV2Gl.ARRAY_BUFFER, window.trisquareNCV2ColorBuffer);
            window.trisquareNCV2Gl.bufferData(window.trisquareNCV2Gl.ARRAY_BUFFER, window.trisquareNCV2Colors, window.trisquareNCV2Gl.STATIC_DRAW);
            
            // 重绘
            window.trisquareNCV2Gl.clear(window.trisquareNCV2Gl.COLOR_BUFFER_BIT);
            window.trisquareNCV2Gl.drawArrays(window.trisquareNCV2Gl.TRIANGLES, 0, 3);
            window.trisquareNCV2Gl.drawArrays(window.trisquareNCV2Gl.TRIANGLE_FAN, 3, 4);
        }
        
        // 重置彩色组合图形
        function resetTrisquareNCV2() {
            if (!window.trisquareNCV2Gl || !window.trisquareNCV2Colors || !window.trisquareNCV2OriginalColors) return;
            
            // 恢复原始颜色
            for (let i = 0; i < window.trisquareNCV2OriginalColors.length; i++) {
                window.trisquareNCV2Colors[i] = window.trisquareNCV2OriginalColors[i];
            }
            
            // 更新颜色缓冲区
            window.trisquareNCV2Gl.bindBuffer(window.trisquareNCV2Gl.ARRAY_BUFFER, window.trisquareNCV2ColorBuffer);
            window.trisquareNCV2Gl.bufferData(window.trisquareNCV2Gl.ARRAY_BUFFER, window.trisquareNCV2Colors, window.trisquareNCV2Gl.STATIC_DRAW);
            
            // 重绘
            window.trisquareNCV2Gl.clear(window.trisquareNCV2Gl.COLOR_BUFFER_BIT);
            window.trisquareNCV2Gl.drawArrays(window.trisquareNCV2Gl.TRIANGLES, 0, 3);
            window.trisquareNCV2Gl.drawArrays(window.trisquareNCV2Gl.TRIANGLE_FAN, 3, 4);
        }
        
        // 页面加载完成后初始化所有图形
        window.onload = function() {
            drawTriangle();
            drawSquare();
            drawTrisquare();
            drawTriangleColor();
            drawTrisquareNC();
            drawTrisquareNCV2();
        };
    </script>
</body>
</html>
